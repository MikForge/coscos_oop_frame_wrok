{"version":3,"sources":["file:///Users/michael/Desktop/gitfiles/coscos_oop_frame_wrok/assets/core/gui/UIConfigRegistry.ts"],"names":["UIConfigRegistry","constructor","configs","Map","locked","getInstance","instance","init","configMap","console","warn","key","hasOwnProperty","set","register","config","has","error","get","clear","uiConfigRegistry"],"mappings":";;;+EASaA,gB;;;;;;;;;;;;;;;;;;;;;;;;;;;AAJb;AACA;AACA;AACA;kCACaA,gB,GAAN,MAAMA,gBAAN,CAAuB;AAKlBC,QAAAA,WAAW,GAAG;AAAA,eAHdC,OAGc,GAH4B,IAAIC,GAAJ,EAG5B;AAAA,eAFdC,MAEc,GAFI,KAEJ;AAAG;;AAEP,eAAXC,WAAW,GAAqB;AACnC,cAAI,CAACL,gBAAgB,CAACM,QAAtB,EAAgC;AAC5BN,YAAAA,gBAAgB,CAACM,QAAjB,GAA4B,IAAIN,gBAAJ,EAA5B;AACH;;AACD,iBAAOA,gBAAgB,CAACM,QAAxB;AACH;AAED;;;AACAC,QAAAA,IAAI,CAACC,SAAD,EAA+B;AAC/B,cAAI,KAAKJ,MAAT,EAAiB;AACbK,YAAAA,OAAO,CAACC,IAAR,CAAa,8BAAb;AACA;AACH;;AAED,eAAK,MAAMC,GAAX,IAAkBH,SAAlB,EAA6B;AACzB,gBAAI,CAACA,SAAS,CAACI,cAAV,CAAyBD,GAAzB,CAAL,EAAoC;AACpC,iBAAKT,OAAL,CAAaW,GAAb,CAAiBF,GAAjB,EAAsBH,SAAS,CAACG,GAAD,CAA/B;AACH;;AAED,eAAKP,MAAL,GAAc,IAAd;AACH;AAED;;;AACAU,QAAAA,QAAQ,CAACH,GAAD,EAAcI,MAAd,EAA+C;AACnD,cAAI,KAAKb,OAAL,CAAac,GAAb,CAAiBL,GAAjB,CAAJ,EAA2B;AACvBF,YAAAA,OAAO,CAACQ,KAAR,CAAe,MAAKN,GAAI,OAAxB;AACA;AACH;;AACD,eAAKT,OAAL,CAAaW,GAAb,CAAiBF,GAAjB,EAAsBI,MAAtB;AACH;AAED;;;AACAG,QAAAA,GAAG,CAACP,GAAD,EAAwC;AACvC,iBAAO,KAAKT,OAAL,CAAagB,GAAb,CAAiBP,GAAjB,KAAyB,IAAhC;AACH;AAED;;;AACAK,QAAAA,GAAG,CAACL,GAAD,EAAuB;AACtB,iBAAO,KAAKT,OAAL,CAAac,GAAb,CAAiBL,GAAjB,CAAP;AACH;AAED;;;AACAQ,QAAAA,KAAK,GAAS;AACV,eAAKjB,OAAL,CAAaiB,KAAb;AACA,eAAKf,MAAL,GAAc,KAAd;AACH;;AApDyB,O,GAuD9B;;;AAvDaJ,MAAAA,gB,CACMM,Q;;kCAuDNc,gB,GAAmBpB,gBAAgB,CAACK,WAAjB,E","sourcesContent":["import { UI } from \"cc\";\nimport { UIComponentConfig, UIConfigMap } from \"../common/struct/ui-structs\";\n\n\n\n/**\n * UI 配置注册器\n * 职责：管理所有 UI 配置的注册、查询、初始化\n */\nexport class UIConfigRegistry {\n    private static instance: UIConfigRegistry;\n    private configs: Map<string, UIComponentConfig> = new Map();\n    private locked: boolean = false;\n\n    private constructor() { }\n\n    static getInstance(): UIConfigRegistry {\n        if (!UIConfigRegistry.instance) {\n            UIConfigRegistry.instance = new UIConfigRegistry();\n        }\n        return UIConfigRegistry.instance;\n    }\n\n    /** 批量初始化配置（只执行一次） */\n    init(configMap: UIConfigMap): void {\n        if (this.locked) {\n            console.warn(\"UIConfigRegistry 已初始化，忽略重复调用\");\n            return;\n        }\n\n        for (const key in configMap) {\n            if (!configMap.hasOwnProperty(key)) continue;\n            this.configs.set(key, configMap[key]);\n        }\n\n        this.locked = true;\n    }\n\n    /** 注册单个配置 */\n    register(key: string, config: UIComponentConfig): void {\n        if (this.configs.has(key)) {\n            console.error(`界面 ${key} 重复注册`);\n            return;\n        }\n        this.configs.set(key, config);\n    }\n\n    /** 获取配置 */\n    get(key: string): UIComponentConfig | null {\n        return this.configs.get(key) || null;\n    }\n\n    /** 检查是否存在 */\n    has(key: string): boolean {\n        return this.configs.has(key);\n    }\n\n    /** 清空（测试用） */\n    clear(): void {\n        this.configs.clear();\n        this.locked = false;\n    }\n}\n\n// 导出单例实例\nexport const uiConfigRegistry = UIConfigRegistry.getInstance();"]}